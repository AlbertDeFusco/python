\documentclass[xcolor=table,10pt,final]{beamer}
\renewcommand\mathfamilydefault{\rmdefault}

\setbeamertemplate{navigation symbols}{}
\usepackage{amsmath,amsfonts,amssymb,pxfonts,xspace}
\usepackage{textcomp}
\usepackage{lmodern}
\usepackage{verbatim}
\usepackage{graphicx}
\usepackage{listings}
\usepackage[T1]{fontenc}

\lstset{
    basicstyle=\footnotesize,
    keywordstyle=\color[rgb]{0.1,0.8,0.1}\bfseries,
    commentstyle=\color{blue},
    numbers=left,
    stringstyle=\ttfamily\color{red!50!brown},
    showstringspaces=false}
\lstset{literate=%
   *{0}{{{\color{red!20!violet}0}}}1
    {1}{{{\color{red!20!violet}1}}}1
    {2}{{{\color{red!20!violet}2}}}1
    {3}{{{\color{red!20!violet}3}}}1
    {4}{{{\color{red!20!violet}4}}}1
    {5}{{{\color{red!20!violet}5}}}1
    {6}{{{\color{red!20!violet}6}}}1
    {7}{{{\color{red!20!violet}7}}}1
    {8}{{{\color{red!20!violet}8}}}1
    {9}{{{\color{red!20!violet}9}}}1
}



\begin{document}

\title{Python for Scientific Computing}
\subtitle{Lecture 3: Object-oriented Programming}
\author{Albert DeFusco\\Center for Simulation and Modeling}
\date{\today}


\frame{\titlepage}


\begin{frame}[fragile]
  \frametitle{Functions and variables}
  \begin{itemize}
    \item Functions can be documented easily\\
      \begin{lstlisting}[language=Python]
def pi(i):
  """Compute the ith term of the Wallis formula"""
  return 4.*i**2 / (4.*i**2 - 1)

help(pi)
      \end{lstlisting}
    \item Multiple returns are tuples\\
      \begin{lstlisting}[language=Python]
def myFunction(x,y):
  return x**2,y*4

a,b = myFunction(y=2,x=8)
      \end{lstlisting}
    \item Functions are objects
    \item Global variables can be defined
      \begin{itemize}
        \item Globals are not always good practice
        \item May reduce the usability of a module
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Variable Scopes}
  \begin{itemize}
    \item Name Spaces
      \begin{itemize}
        \item Global
        \item Functions
        \item Modules
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Function Scope}
  \begin{itemize}
    \item Variables assigned in a function are private
  \end{itemize}
\begin{lstlisting}[language=Python]
def pi(i):
  """Compute the ith term of the Wallis formula"""
  temp=4.*i**2
  return temp / (temp - 1)

print pi(2)
print temp
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Function Scope}
  \begin{itemize}
    \item Warning!
      \begin{itemize}
        \item Variables assigned before a function are still in scope
        \item It helps to define functions first
      \end{itemize}
  \end{itemize}
\begin{lstlisting}[language=Python]
myVar = 5
def pi(i):
  """Compute the ith term of the Wallis formula"""
  print myVar
  temp=4.*i**2
  return temp / (temp - 1)

print temp
\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Classes}
  \begin{lstlisting}[language=Python]
class shape(object):
  """Shapes have color"""
  def setColor(self,color):
    self.color=color


class Molecule(object):
  """Molecules have a name and chemical formula"""
  def __init__(self,name)
    self.name = name
  def setName(self,name):
    self.name = name
  def setFormula(self,formula):
    self.formula=formula
\end{lstlisting}
\end{frame}

\begin{frame}
  \frametitle{Class and instance variables}
  \begin{itemize}
    \item Loose definition can lead to confusion
    \item Instance variables
      \begin{itemize}
        \item Must use {\tt self}
      \end{itemize}
    \item Class variables
      \begin{itemize}
        \item May be default values
        \item Accessible in the {\it instance} and {\it class} name spaces
        \item Be wary of using mutable objects
      \end{itemize}
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Overloading}
  Change or the define the behavior of operations
  \begin{lstlisting}[language=Python]
class Molecule(object):
...
  def __add__(self, other):
    return self.formula+other.formula
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Inheritance}
  \begin{itemize}
    \item Child classes can be more {\it specific} than the parent\\
    \item Subclasses can override the superclass$^\dagger$\\
\begin{lstlisting}[language=Python]
class shape(object):
  def setColor(self,color):
    self.color=color

class circle(shape):
  def __init__(self,radius=1.0):
    self.radius=radius
\end{lstlisting}
  \end{itemize}
  $^\dagger${\scriptsize Polymorphism in Python is achieved when classes implement the same methods, which reduces the number of {\tt if} statements}
\end{frame}

\begin{frame}
  \frametitle{Modules}
  \begin{itemize}
    \item Any Python script file can be imported
    \item Name space defaults to the file name
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Modules}
  \begin{itemize}
    \item Import {\tt math.py} such that {\tt math} becomes the object name\\
      \lstinline[language=Python]|import math|\\
      \lstinline[language=Python]|print math.pi|\\
      \lstinline[language=Python]|print math.sin(math.pi)|
    \item Alternatives
      \begin{itemize}
        \item \lstinline[language=Python]|from math import sin|
        \item \lstinline[language=Python]|import math as maths|
      \end{itemize}
    \item Avoid
      \begin{itemize}
        \item \lstinline[language=Python]|from math import *|
      \end{itemize}
  \end{itemize}
  \vskip1cm
{\it If you can imagine it, someone probably has a module that can do it.}\\
{\scriptsize \url{http://docs.python.org/2/py-modindex.html}}\\
{\scriptsize \url{http://wiki.python.org/moin/UsefulModules}}\\
\end{frame}

\begin{frame}
  \frametitle{Error handling}
  \begin{itemize}
    \item unix return codes
    \item stderr
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Exception Object}
  \begin{itemize}
    \item Exceptions represent errors
    \item Exceptions are built-in at the lowest level
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Checking for errors}
  \begin{itemize}
    \item avoid checking (if) for all possible errors
  \end{itemize}
  \begin{lstlisting}[language=Python]
def celcius(tempF):
\end{lstlisting}
\end{frame}

\end{document}
